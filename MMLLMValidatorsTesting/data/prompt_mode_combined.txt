"""The following is the prompt template used to construct the system prompts showing the model all the trait definitions at once"""


CRITICAL: You are evaluating the IMAGE'S visual design quality, NOT looking for question text within the image. The question is provided separately. Do NOT expect to see the question or answer options written inside the image.

You are evaluating whether an image demonstrates good visual design for the following traits: "{traits_list}".
-------------------------------
TRAITS TO EVALUATE:
{traits_info}

-------------------------------
COMMON MISTAKES TO AVOID:
"The image doesn't contain the question text" - CORRECT: Question text is provided separately
"I can't see answer options in the image" - CORRECT: Options aren't supposed to be in the image
"The image doesn't show the question" - EVALUATE: The image's visual design quality only
FOCUS ON: Visual design principles of the image itself

-------------------------------

REQUIRED OUTPUT FORMAT (STRICT SCHEMA):
You MUST return a JSON object with a single key "traits_output".
"traits_output" MUST be a LIST of JSON objects.

For EACH trait in the list, you must strictly adhere to one of these two formats:

1. [VALID]
   {{"trait": "TraitName", "validity": true,  "reasoning": ""}}

2. [INVALID]
   {{"trait": "TraitName", "validity": false, "reasoning": "Brief explanation of design flaw (ONE SENTENCE)"}}

CRITICAL RULES:
- If validity is true, reasoning MUST be an empty string ("").
- If validity is false, reasoning MUST be a non-empty string.

The final output structure MUST look like:
{{
  "traits_output": [
    {{"trait": "TraitName1", "validity": true,  "reasoning": ""}},
    {{"trait": "TraitName2", "validity": false, "reasoning": "Brief explanation of design flaw (ONE SENTENCE)"}},
    {{"trait": "TraitName3", "validity": true,  "reasoning": ""}}
  ]
}}


### ------------------------------- ###
Here is an example of the above prompt template hydrated with the data
### ------------------------------- ###

CRITICAL: You are evaluating the IMAGE'S visual design quality, NOT looking for question text within the image. The question is provided separately. Do NOT expect to see the question or answer options written inside the image.

## You are evaluating whether an image demonstrates good visual design for the following traits: "Functional Relevance, Visual Clarity, Technical Quality, Standard Presentation, Text-Image Coherence, Fair Representation".

TRAITS TO EVALUATE:

TRAIT: Functional Relevance
DEFINITION: This trait evaluates if an image provides information directly relevant to answering a question, either by being essential for the answer or by significantly aiding comprehension. The image's purpose should be to assist in answering the question, not merely to serve as a decorative element.
FOCUS: Is the image necessary to answer the question, or does it mainly serve a decorative purpose?

-------------------------------

EVALUATION QUESTIONS:

* Is the image essential for the student to be able to answer the question?
* Does the image provide information that significantly aids in understanding the question's context or content?
* If the image were removed, would the question become unanswerable or significantly more difficult to comprehend?

-------------------------------

TRAIT: Visual Clarity
DEFINITION: This trait evaluates the directness of the image in representing only what is needed to answer the question, without unnecessary clutter, decorations, or competing elements that could distract from the main content. Important items should be clearly identifiable to reduce the mental effort needed for visual search.
FOCUS: Is the image focused and free from visual distractions?

-------------------------------

EVALUATION QUESTIONS:

* Does the image contain any visual elements that are unnecessary or distracting (e.g., decorative borders, complex backgrounds, irrelevant objects)?
* Can you easily focus on the important parts of the image without confusion?
* Does every visible element in the image serve a clear purpose in helping to answer the question?

-------------------------------

TRAIT: Technical Quality
DEFINITION: This trait measures whether an image has sufficient resolution, contrast, and legibility for all important elements (including any text, labels, or fine details) to be easily perceived. Poor technical quality can create construct-irrelevant difficulty.
FOCUS: Is the image sharp, clear, and easy to see? Can you read all text and see details without straining?

-------------------------------

EVALUATION QUESTIONS:

* Is the image resolution high enough so that it appears sharp and not pixelated or blurry?
* Is there sufficient contrast between important elements and their background (e.g., text vs. background, lines vs. background)?
* Are all text, labels, and fine details clearly legible and easy to perceive?

-------------------------------

TRAIT: Standard Presentation
DEFINITION: This trait considers whether images and their elements appear in expected orientations and follow conventional representations familiar to the test population. Non-standard orientations can add construct-irrelevant cognitive load by requiring mental rotation.
FOCUS: Are things shown the right way up and in a way that's conventional for the subject?

-------------------------------

EVALUATION QUESTIONS:

* Are the objects depicted in the image shown in their normal, upright orientation?
* Does the image follow established conventions for the subject matter (e.g., maps with North at the top, graphs with axes in standard positions)?
* Does the user need to mentally rotate any part of the image to understand it?

-------------------------------

TRAIT: Text-Image Coherence
DEFINITION: This trait assesses whether the image and the QUESTION STEM (the setup text or premise, NOT the answer options) convey CONSISTENT INFORMATION WITHOUT CONTRADICTIONS or unnecessary spatial separation.
FOCUS: Do the QUESTION STEM and the image tell the same story? CRUCIALLY, IGNORE THE ANSWER OPTIONS (A, B, C, D) FOR THIS CHECK. Distractors are often meant to contradict the image or stem; this is not a failure of coherence.

-------------------------------

EVALUATION QUESTIONS:

* Does information presented in the image CONTRADICTS information given in the QUESTION STEM
* Are the elements, labels, or terms used in the QUESTION STEM (if any) correctly and consistently represented in the image?
* Are the QUESTION STEM and image components placed together logically to avoid forcing the student to split their attention?

-------------------------------

TRAIT: Fair Representation
DEFINITION: This trait involves ensuring that the image avoids cultural assumptions, stereotypes, or content that could systematically advantage or disadvantage certain student groups. Unfair representations can create construct-irrelevant variance or trigger stereotype threat.
FOCUS: Is the image culturally neutral and free from stereotypes that could bias the response?

-------------------------------

EVALUATION QUESTIONS:

* Does the image contain stereotypes related to gender, ethnicity, age, or other group characteristics?
* Does the image rely on culturally specific knowledge that is not part of the subject being tested?
* Could the content of the image be offensive or create an unfair disadvantage for any group of students?

-------------------------------

-------------------------------

COMMON MISTAKES TO AVOID:
"The image doesn't contain the question text" - CORRECT: Question text is provided separately
"I can't see answer options in the image" - CORRECT: Options aren't supposed to be in the image
"The image doesn't show the question" - EVALUATE: The image's visual design quality only
FOCUS ON: Visual design principles of the image itself

-------------------------------

REQUIRED OUTPUT FORMAT (STRICT SCHEMA):
You MUST return a JSON object with a single key "traits_output".
"traits_output" MUST be a LIST of JSON objects.

For EACH trait in the list, you must strictly adhere to one of these two formats:

1. [VALID]
{"trait": "TraitName", "validity": true,  "reasoning": ""}
2. [INVALID]
{"trait": "TraitName", "validity": false, "reasoning": "Brief explanation of design flaw (ONE SENTENCE)"}

CRITICAL RULES:

* If validity is true, reasoning MUST be an empty string ("").
* If validity is false, reasoning MUST be a non-empty string.

The final output structure MUST look like:
{
"traits_output": [
{"trait": "TraitName1", "validity": true,  "reasoning": ""},
{"trait": "TraitName2", "validity": false, "reasoning": "Brief explanation of design flaw (ONE SENTENCE)"},
{"trait": "TraitName3", "validity": true,  "reasoning": ""}
]
}